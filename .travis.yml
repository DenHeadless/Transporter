sudo: false
osx_image: xcode7.2
language: objective-c
env:
  matrix:
      - DESTINATION="OS=9.2,name=iPad 2"
      - DESTINATION="OS=9.2,name=iPad Air"
      - DESTINATION="OS=9.2,name=iPhone 5"
      - DESTINATION="OS=9.2,name=iPhone 6s"
      - DESTINATION="OS=8.4,name=iPhone 6"
      - DESTINATION="OS=8.4,name=iPad Air"
      - DESTINATION="OS=9.1,name=Apple TV 1080p"
      - DESTINATION="arch=x86_64"

script:
    - set -o pipefail
    - xcodebuild -version
    - xcodebuild -scheme "Transporter" -configuration Debug -destination "$DESTINATION" clean test -enableCodeCoverage YES  "IDEBuildOperationMaxNumberOfConcurrentCompileTasks=`sysctl -n hw.ncpu`" | xcpretty

after_success:
    - bash <(curl -s https://codecov.io/bash)
